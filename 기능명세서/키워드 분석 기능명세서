# 키워드 분석 및 기사 요약 기능명세서

## 1. 개요
### 1.1 목적
- 사용자 입력 키워드 기반 관련 기사 검색
- 키워드 출현 빈도
- OpenAI GPT API를 활용한 기사 요약 생성

### 1.2 범위
- 대상: Article, Keyword, ArticleKeyword 테이블
- 분석 기간: 최근 1개월 이내 기사
- 요약 길이: 최대 5문단

## 2. 상세 기능
### 2.1 키워드 검색
#### 입력
- Keyword 테이블
  - word: 검색 키워드
- ArticleKeyword 테이블
  - frequency: 출현 빈도
  - article_id: 관련 기사

#### 처리
- 키워드 검색 프로세스
  - 키워드 전처리
    - 공백 제거 및 소문자 변환
    - 특수문자 처리
    - 유사 키워드 매핑
  
  - 기사 검색 로직
    - 정확도 기반 검색 (제목/본문 일치)
    - 출현 빈도 기반 정렬
    - 매체별 그룹화 및 순위화
    
  - 데이터 집계
    - 시간대별 분포 분석
    - 연관 키워드 추출

- 검색 결과 최적화
  - 캐시 적용 (Redis)
    - 인기 키워드 캐싱
    - 검색 결과 임시 저장
  - 페이지네이션 처리
    - 페이지당 20건
    - 무한 스크롤 지원

#### 출력
- 키워드 관련 기사 목록
  - 기사 제목/내용
  - 출현 빈도
  - 매체 수


### 2.3 사용자 활동 기록
#### 입력
- UserActivity 테이블
  - user_id: 사용자
  - activity_type: 'search'/'summary'
  - target_type: 'keyword'/'article'
  - target_id: 키워드/기사 ID

#### 처리
- 활동 로그 생성
  - 검색 이력 저장
  - 요약 조회 기록
  - 세션 관리

#### 출력
- 사용자별 활동 통계
  - 검색 키워드 이력
  - 요약 조회 횟수
  - 관심 카테고리

## 3. 제약사항
### 3.1 기술적 제약
- GPT API 호출 제한: 분당 20회
- 요약 길이: 최대 5문단
- 동시 처리: 최대 20건

### 3.2 데이터 제약
- 최소 키워드 길이: 2자 이상
- 요약 대상: 본문 100자 이상 #기사 모든 몬분
- 캐시 유효기간: 24시간

## 4. 성능 요구사항
- 키워드 검색: 1초 이내
- 요약 생성: 5초 이내
- 캐시 적중률: 80% 이상